# vim: ft=sh

# Make sure we have always loaded ~/.profile
if [ -z $PROFILE_LOADED ]; then
  . $HOME/.profile
fi

# Remember stuff
HISTFILE=$HOME/.history
HISTFILESIZE=2000
HISTSIZE=1000
SAVEHIST=$HISTSIZE

# Nicer colors. BSD uses $LSCOLORS, linux uses $LS_COLORS
OS=`uname`
if [ "$OS" = "Linux" ]; then
  export LS_COLORS='di=36;40:ln=35;40:so=31;40:pi=31;40:ex=1;32;40:bd=34;46:cd=34;43:su=0;41:sg=0;46:tw=36;01:ow=36;01:'
else
  export LSCOLORS=gxfxbxbxCxegedabagGxGx
fi
unset OS

# Activate default virtual env. Checking $VIRTUAL_ENV does not work here since
# tmux sessions will get the env variable, but not the $PATH changes.
if [ -f $VIRTUAL_ENV_DEFAULT_DIR/bin/activate ]; then
  # This will modify the prompt, so do it before setting the prompt
  . $VIRTUAL_ENV_DEFAULT_DIR/bin/activate
fi

# Make sure the terminal type we're using is supported (tmux-256color doesn't
# work everywhere yet)
if ! infocmp $TERM > /dev/null 2>&1; then
  if [[ "$TERM" = "tmux-256color" ]]; then
    export TERM="screen-256color"
  else
    export TERM="xterm-256color"
  fi
fi

# Load aliases
if [ -f $HOME/.aliases ]; then
  . $HOME/.aliases
fi

# Primitive prompt for a primitive shell
PS1="$USER:$HOST% "
