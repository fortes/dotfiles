#!/usr/bin/env bash
# FZF with file preview
#
# Usage: rg foo | fzf-with-preview
set -euo pipefail
IFS=$'\n\t'
export DEBIAN_FRONTEND=noninteractive

main() {
  rg --vimgrep ${@} | fzf --delimiter : \
    --preview 'batcat --color always --style=grid,changes \
                --highlight-line {2} \
                --paging=never \
                --line-range $(rgvf_subtract_helper {2} 5 || echo 1): {1}'
}

main "${@}"


