#!/usr/bin/env sh

fd_command="fd"
if ! command -v "${fd_command}" > /dev/null; then
  # Debian uses `fdfind`
  fd_command="fdfind"
fi

if [ "$#" -eq 0 ]; then
  # Default to matching all files
  set -- "."
fi

if git rev-parse --is-inside-work-tree > /dev/null 2>&1; then
  git_root=$(git rev-parse --show-cdup)
  "${fd_command}" --type file --follow --hidden --relative-path "$@" "${git_root:-.}"
else
  "${fd_command}" --type file --follow --relative-path "$@"
fi
